{"ast":null,"code":"import _slicedToArray from \"/home/hyperloop/dev/ether-flask/_agistic/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/hyperloop/dev/ether-flask/_agistic/client/src/components/Join/Join.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport app from \"../firebase/firebase.js\";\nimport './Join.css';\n\nfunction onAuthStateChange(callback) {\n  return app.auth().onAuthStateChanged(user => {\n    if (user) {\n      var id = user.uid;\n      var ref = app.database().ref();\n      app.database().ref('/users/' + id).once('value').then(snapshot => {\n        console.log(snapshot.val().username);\n        callback(snapshot.val().username);\n      });\n    } else {\n      callback('');\n    }\n  });\n}\n\nfunction getRooms(callback) {\n  return app.database().ref('/').once('value').then(snapshot => {\n    callback(Object.keys(snapshot.val().rooms));\n    console.log(Object.keys(snapshot.val().rooms));\n  });\n}\n\nexport default function SignIn() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      room = _useState4[0],\n      setRoom = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      existingRooms = _useState6[0],\n      setExistingRooms = _useState6[1];\n\n  useEffect(() => {\n    var unsubscribe = onAuthStateChange(setName);\n    getRooms(setExistingRooms);\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n  console.log(\"existingRooms\");\n  console.log(name);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"joinOuterContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"joinInnerContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, \"Join\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Create new Room\",\n    className: \"joinInput mt-20\",\n    type: \"text\",\n    onChange: event => setRoom(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: '30px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Existing Rooms\",\n    type: \"text\",\n    list: \"data\",\n    className: \"joinInput mt-20\",\n    onChange: event => setRoom(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(\"datalist\", {\n    id: \"data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, existingRooms.map((item, key) => /*#__PURE__*/React.createElement(\"option\", {\n    key: key,\n    value: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Link, {\n    onClick: e => !name || !room ? e.preventDefault() : null,\n    to: \"/chat?name=\".concat(name, \"&room=\").concat(room),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: 'button mt-20',\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"Sign In\"))));\n}","map":{"version":3,"sources":["/home/hyperloop/dev/ether-flask/_agistic/client/src/components/Join/Join.js"],"names":["React","useState","useEffect","Link","app","onAuthStateChange","callback","auth","onAuthStateChanged","user","id","uid","ref","database","once","then","snapshot","console","log","val","username","getRooms","Object","keys","rooms","SignIn","name","setName","room","setRoom","existingRooms","setExistingRooms","unsubscribe","event","target","value","marginTop","map","item","key","e","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState , useEffect} from 'react';\nimport { Link } from \"react-router-dom\";\n\nimport app from \"../firebase/firebase.js\";\n\nimport './Join.css';\n\nfunction onAuthStateChange(callback) {\n\treturn app.auth().onAuthStateChanged(user => {\n\t  if (user) { \n      var id= user.uid;\n       var ref = app.database().ref();\n       app.database().ref('/users/' + id).once('value').then((snapshot) => {\n          console.log(snapshot.val().username);\n          callback(snapshot.val().username);\n     });\n\t  } else {\n\t\tcallback('');\n\t  }\n\t});\n}\n\nfunction getRooms(callback) {\n  return app.database().ref('/').once('value').then((snapshot) => {\n     callback(Object.keys(snapshot.val().rooms));\n     console.log(Object.keys(snapshot.val().rooms));\n});\n}\n\nexport default function SignIn() {\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n  const [existingRooms,setExistingRooms]= useState([]);\n\n  useEffect(() => {\n\t\tconst unsubscribe = onAuthStateChange(setName);\n    getRooms(setExistingRooms);\n\t\treturn () => {\n\t\t  unsubscribe();\n\t\t};\n\t  }, []);\n\n    console.log(\"existingRooms\");\n    console.log(name);\n\n  return (\n    <div className=\"joinOuterContainer\">\n      <div className=\"joinInnerContainer\">\n        <h1 className=\"heading\">Join</h1>\n        {/* <div>\n          <input placeholder=\"Name\" className=\"joinInput\" type=\"text\" onChange={(event) => setName(event.target.value)} />\n        </div> */}\n        <div>\n          <input placeholder=\"Create new Room\" className=\"joinInput mt-20\" type=\"text\" onChange={(event) => setRoom(event.target.value)} />\n        </div>\n        <div style={{marginTop:'30px'}} >\n         <input placeholder=\"Existing Rooms\" type=\"text\" list=\"data\" className=\"joinInput mt-20\" onChange={(event) => setRoom(event.target.value)}  />\n          <datalist id=\"data\">\n             { \n             existingRooms.map((item, key) => \n              <option key={key} value={item}/>\n            )\n          } \n          </datalist>\n        </div>\n        <Link onClick={e => (!name || !room) ? e.preventDefault() : null} to={`/chat?name=${name}&room=${room}`}>\n          <button className={'button mt-20'} type=\"submit\">Sign In</button>\n        </Link>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}